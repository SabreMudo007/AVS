<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="Imagens/AVS-logo.png">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="Estilos.css">
<title>AVS - Login</title>
</head>

<body class="body-doar">

<nav>
  <ul class="list-menu">
    <li> <a href="https://avs.great-site.net"><img src="Imagens/AVS-logo.png" alt="AVS" height="5" width="5"> </a></li>
    <li><a href="https://avs.great-site.net">Inicio</a></li>
    <li><a href="Eventos.html">Eventos</a></li>
    <li><a href="Doar.html">Doar</a></li>
    <li><a href="Sobre.html">Sobre nós</a></li>
    <li><a href="Join.html">Junte-se às equipas</a></li>
    <li><a href="Conta.html"></a></li>
  </ul>
</nav>

<section class="login-container">
  <div class="login-card">
    <h2>Entrar</h2>
    <p>Aceda à sua conta para continuar.</p>

    <form class="login-form">
      <label for="email">E-mail</label>
      <input type="email" id="email" placeholder="Digite o seu e-mail" required>

      <label for="senha">Palavra-passe</label>
      <input type="password" id="senha" placeholder="Digite a sua palavra-passe" required>

      <button type="submit" id="submit">Entrar</button>

      <p class="registar-link">
        Ainda não tem conta? <a href="Registar.html">Registe-se</a>
      </p>
    </form>
  </div>
</section>

<footer>
  <p>2025 Associação de Voluntariado de Setúbal.</p>
</footer>

<script type="module">
  // importa os módulos necessários do Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

  // configurações necessárias para inicializar o Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBIE36QlivTvwqx6fjEV2EVAK2gN7dRdrs",
    authDomain: "avs-login-b3345.firebaseapp.com",
    projectId: "avs-login-b3345",
    storageBucket: "avs-login-b3345.firebasestorage.app",
    messagingSenderId: "441342978542",
    appId: "1:441342978542:web:884bc7280c4db0c6bdc6ff",
    measurementId: "G-HNBCC7SQF5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app); // liga e inicializa o serviço de autenticação


  const emailInput = document.getElementById("email");
  const senhaInput = document.getElementById("senha");
  const loginBtn = document.getElementById("submit"); // guarda as referências dos elementos do formulário

  loginBtn.addEventListener("click", (e) => { // ao clicar no botão de login
    e.preventDefault(); // impede o refresh da página para não perder os dados

    const email = emailInput.value;
    const password = senhaInput.value; // guarda os valores inseridos nas variáveis

    signInWithEmailAndPassword(auth, email, password) // tenta autenticar com email e senha
      .then((userCredential) => { // se for bem sucedido (usercredential contém os dados do utilizador)
        alert("Login efetuado com sucesso!"); 
        window.location.href = "Logado.html"; // redireciona para a página com a conta
      })
      .catch((error) => { // se houver erro na autenticação
        let msg = "Erro no login.\n";

        if (error.code === "auth/invalid-credential") { // se as credenciais forem inválidas
          msg += "Email ou palavra-passe incorretos."; 
        } else if (error.code === "auth/user-not-found") {
          msg += "Este email não existe."; // se o email não estiver registado
        } else if (error.code === "auth/wrong-password") { // se a password estiver errada
          msg += "Palavra-passe incorreta.";
        } else { // para outros erros
          msg += error.message;
        }

        alert(msg); // mostra a mensagem de erro apropriada, com pelo menos o "Erro no login."
      });
  });
</script>
</body>
</html>
